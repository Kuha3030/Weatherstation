@* This view is here to demonstrate how to display data from database *@
@* Action link, joka ottaa käyttäjän syöttämän datan textboxista ja välittää sen metodille.*@
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
@{
    ViewBag.Title = ViewBag.searchLocation;
}

<br />
<!-- Showing search location-->
<!-- DateTime.Today.AddDays(1).AddHours(-4) && item[2] <= DateTime.Today.AddDays(2).AddHours(hoursForNextDay-3) -->
@*
    @if (ViewBag.searchLocation != "" & ViewBag.searchLocation != "Geolocation error")
    {
        <h4>Weather data from: <a class="text-decoration-none">@ViewBag.searchLocation</a></h4>
        <hr />

    }
*@
@*@if (ViewBag.searchLocation == "Geolocation error")
    {
        <h3>Geolocation error!</h3>
    }*@

@*<p>Time is: @DateTime.Now</p>*@
<!--Search bar and button. jQuery can be found from the bottom-->

<p id="searchTitle" style="color:lightseagreen;font-size:14px">Enter a location:</p>

<input type="text" name="IP" id="IP" pattern="[A-Za-zÀ-ÖØ-öø-ÿ]" value="" />

@Html.ActionLink("Search", "SaveToDB", "Compilation", new { location = "thisValueGetsReplaced", TypeId = "1" }, new { @class = "btn btn-primary btn-sm", id = "SearchButton" })
<p id="eMessage" style="color:red;font-size:12px">@ViewBag.ErrorMessage</p>


<!--Uncomment for dev statistics: -->

    <p>Gathering data to the View's DataTable: @ViewBag.StopwatchGather ms </p>

    @if (ViewBag.searchLocation != "")
    {
        <hr />
        if (ViewBag.YrnoCheck == true)
        {
            <p>Results from yrno: fresh from API</p>
        }
        else
        {
            <p>Results from yrno: from DB</p>
        }
        if (ViewBag.FMICheck == true)
        {
            <p>Results from FMI: fresh from API</p>
        }
        else
        {
            <p>Results from FMI: from DB</p>
        }
        if (ViewBag.ForecaCheck == true)
        {
            <p>Results from Foreca: fresh from API</p>
        }
        else
        {
            <p>Results from Foreca: from DB</p>
        }
    }


    <!-- Search time statistics, activate by replacing "juttu" with "fresh"-->
    @if (ViewBag.Fresh == "fresh")
    {

        <p>Whole search: @ViewBag.StopwatchMethod ms </p>
        <p>------------------------------------------------</p>
        <p>Fetching from API: @ViewBag.StopwatchSearch ms</p>
        <p>Fetching access token for Foreca: @ViewBag.StopwatchAccessToken ms</p>
        <p>DB operations: @ViewBag.StopwatchDBoperations ms</p>
        <p>------------------------------------------------</p>
        <p>Create search and get search id: @ViewBag.StopwatchCreatesearch ms </p>
        <p>Inserting into DB: @ViewBag.StopwatchInsert ms</p>
    }



@if (ViewBag.searchLocation != "" & ViewBag.searchLocation != "Geolocation error")
{
    <div class="process">
        <div class="row">
            <div class="row">
                <ul class="nav flex-column justify-content-xxl-center" id="myTab" role="tab" align="center">
                    <ul class="nav-item active">
                        <div class="text-center">
                            <h1 class="text-primary">@ViewBag.searchLocation</h1>

                            <a class="nav-item btn btn-outline-primary" data-toggle="tab" href="#home" role="tab" aria-controls="home">24 hours</a>
                            <a class="nav-item btn btn-outline-primary" data-toggle="tab" href="#profile" role="tab" aria-controls="profile">7 days</a>
                        </div>
                        <hr style="height:3px" class="text-primary" />
                    </ul>
                </ul>
            </div>
            <br>
            <div class="col-md-12" align="center">
                <div class="tab-content" align="center">
                    <div class="tab-pane active" id="home" role="tabpanel" align="center">
                        @if (!(ViewBag.searchLocation == "") & !(ViewBag.searchLocation == "Geolocation error"))
                        {

                            <!-- CURRENT DAY -->
                            int hoursForNextDay = 0;

                            <h4 align="center">@DateTime.Today.ToString("dddd")</h4>
                            <hr style="height:1px">
                            <div class="container-fluid">
                                <div class="row" align="center">

                                    <!-- yr. no -->
                                    <div class="table-responsive col-lg-4">
                                        <h5 align="center" style="color:cornflowerblue"><strong>yr.no</strong></h5>

                                        <table class="table table-striped" width="33%">
                                            <thead>
                                                <tr>
                                                    <th>Time</th>
                                                    <th>Weather</th>
                                                    <th>Temp.</th>
                                                    <th>Wind m/s</th>
                                                    <th>Prec. mm</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @foreach (var item in ViewData.Model)
                                                {
                                                    <tr>
                                                        @if (item[1] == 2 && item[2] > DateTime.UtcNow.AddHours(-1) && item[2] <= DateTime.Today.AddDays(1).AddHours(-4))
                                                        {
                                                            hoursForNextDay--;
                                                            string check5 = item[5].Replace(".", ",");
                                                            string check6 = item[6].Replace(".", ",");
                                                            <td>@item[2].AddHours(3).ToString("HH:mm")</td>
                                                            <td><img src="@Url.Content("~/img/weather_icons_yrno/" + @item[6] + ".png")" width="30px" /></td>

                                                            <td class="text-danger" align="center"><strong>@item[3]°</strong></td>
                                                            <td class="text-success" align="center"><strong>@item[4]</strong></td>
                                                            if (Convert.ToDouble(check5) <= 0)
                                                            {
                                                                <td align="center">--</td>
                                                            }
                                                            else
                                                            {
                                                                <td class="text-primary" align="center">@check5</td>
                                                            }

                                                        }
                                                    </tr>
                                                }


                                            </tbody>
                                        </table>
                                    </div>

                                    <!-- FMI -->

                                    <div class="table-responsive col-lg-4">
                                        <h5 align="center" style="color:lightseagreen"><strong>FMI</strong></h5>
                                        <table class="table table-striped" width="33%">
                                            <thead>
                                                <tr>
                                                    <th>Time</th>
                                                    <th>Weather</th>
                                                    <th>Temp.</th>
                                                    <th>Wind m/s</th>
                                                    <th>Prec. mm</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @foreach (var item in ViewData.Model)
                                                {
                                                    <tr>
                                                        @if (item[1] == 1 && item[2] > DateTime.UtcNow.AddHours(-1) && item[2] <= DateTime.Today.AddDays(1).AddHours(-4))
                                                        {
                                                            string check5 = item[5].Replace(".", ",");
                                                            <td>@item[2].AddHours(3).ToString("HH:mm")</td>
                                                            if (check5 != "NaN")
                                                            {
                                                                if (Convert.ToDouble(check5) > 5)
                                                                {
                                                                    <td>  <img src="@Url.Content("~/img/weather_icons/heavyrain.svg")" width="30px" /></td>

                                                                }
                                                                else if (Convert.ToDouble(check5) > 0.6)
                                                                {
                                                                    <td>  <img src="@Url.Content("~/img/weather_icons/moderaterain.svg")" width="30px" /></td>

                                                                }
                                                                else if (Convert.ToDouble(check5) > 0.02)
                                                                {
                                                                    <td>  <img src="@Url.Content("~/img/weather_icons/lightrain.svg")" width="30px" /></td>

                                                                }
                                                                else if (Convert.ToDouble(item[6].Replace('.', ',')) == 100)
                                                                {
                                                                    <td>  <img src="@Url.Content("~/img/weather_icons/cloud100.svg")" width="30px" /></td>
                                                                }
                                                                else if (Convert.ToDouble(item[6].Replace('.', ',')) > 75)
                                                                {
                                                                    if (item[2].AddHours(2).Hour < 21 && item[2].AddHours(4).Hour > 6)
                                                                    {
                                                                        <td align="left"><img src="@Url.Content("~/img/weather_icons/cloud75.svg")" width="30px" />                                                                            </td>
                                                                    }
                                                                    else
                                                                    {
                                                                        <td align="left"><img src="@Url.Content("~/img/weather_icons/cloud75-night.svg")" width="30px" />                                                                            </td>

                                                                    }
                                                                }
                                                                else if (Convert.ToDouble(item[6].Replace('.', ',')) > 37.5)
                                                                {
                                                                    if (item[2].AddHours(2).Hour < 21 && item[2].AddHours(4).Hour > 6)
                                                                    {
                                                                        <td align="left"><img src="@Url.Content("~/img/weather_icons/cloud50.svg")" width="30px" />                                                                            </td>
                                                                    }
                                                                    else
                                                                    {
                                                                        <td align="left"><img src="@Url.Content("~/img/weather_icons/cloud50-night.svg")" width="30px" />                                                                            </td>

                                                                    }
                                                                }
                                                                else if (Convert.ToDouble(item[6].Replace('.', ',')) > 12.5)
                                                                {
                                                                    if (item[2].AddHours(2).Hour < 21 && item[2].AddHours(4).Hour > 6)
                                                                    {
                                                                        <td align="left"><img src="@Url.Content("~/img/weather_icons/cloud15.svg")" width="30px" />                                                                            </td>
                                                                    }
                                                                    else
                                                                    {
                                                                        <td align="left"><img src="@Url.Content("~/img/weather_icons/cloud15-night.svg")" width="30px" />                                                                            </td>

                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    if (item[2].AddHours(2).Hour < 21 && item[2].AddHours(4).Hour > 6)
                                                                    {
                                                                        <td align="left"><img src="@Url.Content("~/img/weather_icons/cloud0.svg")" width="30px" />                                                                            </td>
                                                                    }
                                                                    else
                                                                    {
                                                                        <td align="left"><img src="@Url.Content("~/img/weather_icons/cloud0-night.svg")" width="30px" />                                                                            </td>

                                                                    }
                                                                }
                                                                <td class="text-danger" align="center"><strong>@item[3]°</strong></td>
                                                                <td class="text-success" align="center"><strong>@item[4]</strong></td>

                                                                if (check5 != "NaN" && Convert.ToDouble(check5) <= 0.01)
                                                                {
                                                                    <td align="center">--</td>
                                                                }
                                                                else
                                                                {
                                                                    <td class="text-primary" align="center">@item[5].Replace(".", ",")</td>
                                                                }

                                                            }
                                                        }
                                                    </tr>
                                                }


                                            </tbody>
                                        </table>
                                    </div>

                                    <!-- Foreca -->

                                    <div class="table-responsive col-lg-4">
                                        <h5 align="center" style="color:indianred"><strong>Foreca</strong></h5>

                                        <table class="table table-striped" width="33%">
                                            <thead>
                                                <tr>
                                                    <th>Time</th>
                                                    <th>Weather</th>
                                                    <th>Temp.</th>
                                                    <th>Wind m/s</th>
                                                    <th>Prec. mm</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @foreach (var item in ViewData.Model)
                                                {
                                                    <tr>
                                                        @if (item[1] == 3 && item[2] > DateTime.UtcNow.AddHours(-1) && item[2] <= DateTime.Today.AddDays(1).AddHours(-4))
                                                        {
                                                            string check5 = item[5].Replace(".", ",");

                                                            <td>@item[2].AddHours(3).ToString("HH:mm")</td>
                                                            <td><img src="@Url.Content("~/img/weather_icons_foreca/" + @item[6] + ".png")" width="30px" /></td>

                                                            <td class="text-danger" align="center"><strong>@item[3]°</strong></td>
                                                            <td class="text-success" align="center"><strong>@item[4]</strong></td>
                                                            if (Convert.ToDouble(check5) <= 0.01)
                                                            {
                                                                <td align="center">--</td>
                                                            }
                                                            else
                                                            {
                                                                <td class="text-primary" align="center">@item[5].Replace(".", ",")</td>
                                                            }

                                                        }
                                                    </tr>
                                                }


                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <!--Dividing the day from current to tomorrow.-->

                            <h4 align="center">@DateTime.Today.AddDays(1).ToString("dddd")</h4>
                            <hr style="height:1px">
                            <div class="container-fluid">
                                <div class="row" align="center">

                                    <!-- yr. no -->
                                    <div class="table-responsive col-lg-4">
                                        <h5 align="center" style="color:cornflowerblue"><strong>yr.no</strong></h5>

                                        <table class="table table-striped" width="33%">
                                            <thead>
                                                <tr>
                                                    <!--<th>Search ID</th>-->
                                                    <th>Time</th>
                                                    <th>Weather</th>
                                                    <th>Temp.</th>
                                                    <th>Wind m/s</th>
                                                    <th>Prec. mm</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @foreach (var item in ViewData.Model)
                                                {
                                                    <tr>
                                                        @if (item[1] == 2 && item[2] > DateTime.Today.AddDays(1).AddHours(-4) && item[2] <= DateTime.Today.AddDays(2).AddHours(hoursForNextDay - 4))
                                                        {
                                                            string check5 = item[5].Replace(".", ",");
                                                            string check6 = item[6].Replace(".", ",");
                                                            <td>@item[2].AddHours(3).ToString("HH:mm")</td>
                                                            <td><img src="@Url.Content("~/img/weather_icons_yrno/" + @item[6] + ".png")" width="30px" /></td>

                                                            <td class="text-danger" align="center"><strong>@item[3]°</strong></td>
                                                            <td class="text-success" align="center"><strong>@item[4]</strong></td>
                                                            if (Convert.ToDouble(check5) <= 0)
                                                            {
                                                                <td align="center">--</td>
                                                            }
                                                            else
                                                            {
                                                                <td class="text-primary" align="center">@check5</td>
                                                            }

                                                        }
                                                    </tr>
                                                }


                                            </tbody>
                                        </table>
                                    </div>

                                    <!-- FMI -->

                                    <div class="table-responsive col-lg-4">
                                        <h5 align="center" style="color:lightseagreen"><strong>FMI</strong></h5>
                                        <table class="table table-striped" width="33%">
                                            <thead>
                                                <tr>
                                                    <th>Time</th>
                                                    <th>Weather</th>
                                                    <th>Temp.</th>
                                                    <th>Wind m/s</th>
                                                    <th>Prec. mm</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @foreach (var item in ViewData.Model)
                                                {
                                                    <tr>
                                                        @if (item[1] == 1 && item[2] > DateTime.Today.AddDays(1).AddHours(-4) && item[2] <= DateTime.Today.AddDays(2).AddHours(hoursForNextDay - 4))
                                                        {
                                                            string check5 = item[5].Replace(".", ",");
                                                            string check6 = item[6].Replace(".", ",");

                                                            <td>@item[2].AddHours(3).ToString("HH:mm")</td>
                                                            if (check5 != "NaN")
                                                            {
                                                                if (Convert.ToDouble(check5) > 5)
                                                                {
                                                                    <td>  <img src="@Url.Content("~/img/weather_icons/heavyrain.svg")" width="30px" /></td>

                                                                }
                                                                else if (Convert.ToDouble(check5) > 0.6)
                                                                {
                                                                    <td>  <img src="@Url.Content("~/img/weather_icons/moderaterain.svg")" width="30px" /></td>

                                                                }
                                                                else if (Convert.ToDouble(check5) > 0.02)
                                                                {
                                                                    <td>  <img src="@Url.Content("~/img/weather_icons/lightrain.svg")" width="30px" /></td>

                                                                }
                                                                else if (Convert.ToDouble(check6.Replace('.', ',')) == 100)
                                                                {
                                                                    <td>  <img src="@Url.Content("~/img/weather_icons/cloud100.svg")" width="30px" /></td>
                                                                }
                                                                else if (Convert.ToDouble(check6.Replace('.', ',')) > 75)
                                                                {
                                                                    if (item[2].AddHours(2).Hour < 21 && item[2].AddHours(4).Hour > 6)
                                                                    {
                                                                        <td align="left"><img src="@Url.Content("~/img/weather_icons/cloud75.svg")" width="30px" />                                                                            </td>
                                                                    }
                                                                    else
                                                                    {
                                                                        <td align="left"><img src="@Url.Content("~/img/weather_icons/cloud75-night.svg")" width="30px" />                                                                            </td>

                                                                    }
                                                                }
                                                                else if (Convert.ToDouble(check6.Replace('.', ',')) > 37.5)
                                                                {
                                                                    if (item[2].AddHours(2).Hour < 21 && item[2].AddHours(4).Hour > 6)
                                                                    {
                                                                        <td align="left"><img src="@Url.Content("~/img/weather_icons/cloud50.svg")" width="30px" />                                                                            </td>
                                                                    }
                                                                    else
                                                                    {
                                                                        <td align="left"><img src="@Url.Content("~/img/weather_icons/cloud50-night.svg")" width="30px" />                                                                            </td>

                                                                    }
                                                                }
                                                                else if (Convert.ToDouble(check6.Replace('.', ',')) > 12.5)
                                                                {
                                                                    if (item[2].AddHours(2).Hour < 21 && item[2].AddHours(4).Hour > 6)
                                                                    {
                                                                        <td align="left"><img src="@Url.Content("~/img/weather_icons/cloud15.svg")" width="30px" />                                                                            </td>
                                                                    }
                                                                    else
                                                                    {
                                                                        <td align="left"><img src="@Url.Content("~/img/weather_icons/cloud15-night.svg")" width="30px" />                                                                            </td>

                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    if (item[2].AddHours(2).Hour < 21 && item[2].AddHours(4).Hour > 6)
                                                                    {
                                                                        <td align="left"><img src="@Url.Content("~/img/weather_icons/cloud0.svg")" width="30px" />                                                                            </td>
                                                                    }
                                                                    else
                                                                    {
                                                                        <td align="left"><img src="@Url.Content("~/img/weather_icons/cloud0-night.svg")" width="30px" />                                                                            </td>

                                                                    }
                                                                }
                                                                <td class="text-danger" align="center"><strong>@item[3]°</strong></td>
                                                                <td class="text-success" align="center"><strong>@item[4]</strong></td>

                                                                if (check5 != "NaN" && Convert.ToDouble(check5) <= 0.01)
                                                                {
                                                                    <td align="center">--</td>
                                                                }
                                                                else
                                                                {
                                                                    <td class="text-primary" align="center">@item[5].Replace(".", ",")</td>
                                                                }

                                                            }
                                                        }
                                                    </tr>
                                                }


                                            </tbody>
                                        </table>
                                    </div>

                                    <!-- Foreca -->

                                    <div class="table-responsive col-lg-4">
                                        <h5 align="center" style="color:indianred"><strong>Foreca</strong></h5>

                                        <table class="table table-striped" width="33%">
                                            <thead>
                                                <tr>
                                                    <th>Time</th>
                                                    <th>Weather</th>
                                                    <th>Temp.</th>
                                                    <th>Wind m/s</th>
                                                    <th>Prec. mm</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @foreach (var item in ViewData.Model)
                                                {
                                                    <tr>
                                                        @if (item[1] == 3 && item[2] > DateTime.Today.AddDays(1).AddHours(-4) && item[2] <= DateTime.Today.AddDays(2).AddHours(hoursForNextDay - 4))
                                                        {
                                                            string check5 = item[5].Replace(".", ",");

                                                            <td>@item[2].AddHours(3).ToString("HH:mm")</td>
                                                            <td><img src="@Url.Content("~/img/weather_icons_foreca/" + @item[6] + ".png")" width="30px" /></td>

                                                            <td class="text-danger" align="center"><strong>@item[3]°</strong></td>
                                                            <td class="text-success" align="center"><strong>@item[4]</strong></td>
                                                            if (Convert.ToDouble(check5) <= 0.01)
                                                            {
                                                                <td align="center">--</td>
                                                            }
                                                            else
                                                            {
                                                                <td class="text-primary" align="center">@item[5].Replace(".", ",")</td>
                                                            }

                                                        }
                                                    </tr>
                                                }


                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>

                    <!--7 DAYS-->
                    <div class="tab-pane" id="profile" role="tabpanel" align="center">


                        @for (int i = 0; i < 6; i++)
                        {
                            <h4 align="center">@DateTime.Today.AddDays(i + 1).ToString("dddd")</h4>
                            <hr style="height:1px">
                            <div class="row" align="center">
                                <div class="table-responsive col-lg-4" align="left">
                                    <h5 align="center" style="color:cornflowerblue"><strong>yr.no</strong></h5>

                                    <table class="table table-hover" width="33%">
                                        <thead>
                                            <tr>
                                                <!--<th>Search ID</th>-->
                                                <th>Time</th>
                                                <th>Weather</th>
                                                <th>Temp.</th>
                                                <th>Wind m/s</th>
                                                <th>Prec. mm</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var item in ViewData.Model)
                                            {
                                                <tr>
                                                    @if (item[1] == 2 && item[2] > DateTime.Today.AddDays(i + 1).AddHours(-3) && item[2] <= DateTime.Today.AddDays(i + 2).AddHours(-3))
                                                    {
                                                        if (item[2].Hour == 0 | item[2].Hour == 6 | item[2].Hour == 12 | item[2].Hour == 18)
                                                        {

                                                            string check5 = item[5].Replace(".", ",");
                                                            string check6 = item[6].Replace(".", ",");

                                                            <td>@item[2].AddHours(3).ToString("HH:mm")</td>
                                                            <td><img src="@Url.Content("~/img/weather_icons_yrno/" + @item[6] + ".png")" width="30px" /></td>

                                                            <td class="text-danger" align="center"><strong>@item[3]°</strong></td>
                                                            <td class="text-success" align="center"><strong>@item[4]</strong></td>
                                                            if (Convert.ToDouble(check5) <= 0)
                                                            {
                                                                <td align="center">--</td>
                                                            }
                                                            else
                                                            {
                                                                <td class="text-primary" align="center">@check5</td>
                                                            }
                                                        }

                                                    }
                                                </tr>
                                            }


                                        </tbody>
                                    </table>
                                </div>
                                @if (i < 2)
                                {
                                    <div class="table-responsive col-lg-4">
                                        <h5 align="center" style="color:lightseagreen"><strong>FMI</strong></h5>
                                        <table class="table table-hover" width="33%">
                                            <thead>
                                                <tr>
                                                    <th>Time</th>
                                                    <th>Weather</th>
                                                    <th>Temp.</th>
                                                    <th>Wind m/s</th>
                                                    <th>Prec. mm</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @foreach (var item in ViewData.Model)
                                                {
                                                    <tr>
                                                        @if (item[1] == 1 && item[2] > DateTime.Today.AddDays(i + 1).AddHours(-3) && item[2] <= DateTime.Today.AddDays(i + 2).AddHours(-3))
                                                        {
                                                            if (item[2].Hour == 0 | item[2].Hour == 6 | item[2].Hour == 12 | item[2].Hour == 18)
                                                            {
                                                                string check5 = item[5].Replace(".", ",");
                                                                <td>@item[2].AddHours(0).ToString("HH:mm")</td>

                                                                if (check5 != "NaN")
                                                                {
                                                                    if (Convert.ToDouble(check5) > 5)
                                                                    {
                                                                        <td>  <img src="@Url.Content("~/img/weather_icons/heavyrain.svg")" width="30px" /></td>

                                                                    }
                                                                    else if (Convert.ToDouble(check5) > 0.6)
                                                                    {
                                                                        <td>  <img src="@Url.Content("~/img/weather_icons/moderaterain.svg")" width="30px" /></td>

                                                                    }
                                                                    else if (Convert.ToDouble(check5) > 0.02)
                                                                    {
                                                                        <td>  <img src="@Url.Content("~/img/weather_icons/lightrain.svg")" width="30px" /></td>

                                                                    }
                                                                    else if (Convert.ToDouble(item[6].Replace('.', ',')) == 100)
                                                                    {
                                                                        <td>  <img src="@Url.Content("~/img/weather_icons/cloud100.svg")" width="30px" /></td>
                                                                    }
                                                                    else if (Convert.ToDouble(item[6].Replace('.', ',')) > 75)
                                                                    {
                                                                        if (item[2].AddHours(2).Hour < 21 && item[2].AddHours(4).Hour > 6)
                                                                        {
                                                                            <td align="left"><img src="@Url.Content("~/img/weather_icons/cloud75.svg")" width="30px" />                                                                            </td>
                                                                        }
                                                                        else
                                                                        {
                                                                            <td align="left"><img src="@Url.Content("~/img/weather_icons/cloud75-night.svg")" width="30px" />                                                                            </td>

                                                                        }
                                                                    }
                                                                    else if (Convert.ToDouble(item[6].Replace('.', ',')) > 37.5)
                                                                    {
                                                                        if (item[2].AddHours(2).Hour < 21 && item[2].AddHours(4).Hour > 6)
                                                                        {
                                                                            <td align="left"><img src="@Url.Content("~/img/weather_icons/cloud50.svg")" width="30px" />                                                                            </td>
                                                                        }
                                                                        else
                                                                        {
                                                                            <td align="left"><img src="@Url.Content("~/img/weather_icons/cloud50-night.svg")" width="30px" />                                                                            </td>

                                                                        }
                                                                    }
                                                                    else if (Convert.ToDouble(item[6].Replace('.', ',')) > 12.5)
                                                                    {
                                                                        if (item[2].AddHours(2).Hour < 21 && item[2].AddHours(4).Hour > 6)
                                                                        {
                                                                            <td align="left"><img src="@Url.Content("~/img/weather_icons/cloud15.svg")" width="30px" />                                                                            </td>
                                                                        }
                                                                        else
                                                                        {
                                                                            <td align="left"><img src="@Url.Content("~/img/weather_icons/cloud15-night.svg")" width="30px" />                                                                            </td>

                                                                        }
                                                                    }
                                                                    else
                                                                    {
                                                                        if (item[2].AddHours(2).Hour < 21 && item[2].AddHours(4).Hour > 6)
                                                                        {
                                                                            <td align="left"><img src="@Url.Content("~/img/weather_icons/cloud0.svg")" width="30px" />                                                                            </td>
                                                                        }
                                                                        else
                                                                        {
                                                                            <td align="left"><img src="@Url.Content("~/img/weather_icons/cloud0-night.svg")" width="30px" />                                                                            </td>

                                                                        }
                                                                    }
                                                                    <td class="text-danger" align="center"><strong>@item[3]°</strong></td>
                                                                    <td class="text-success" align="center"><strong>@item[4]</strong></td>
                                                                    if (check5 != "NaN" && Convert.ToDouble(check5) <= 0)
                                                                    {
                                                                        <td align="center">--</td>
                                                                    }
                                                                    else
                                                                    {
                                                                        <td class="text-primary" align="center">@item[5].Replace(".", ",")</td>
                                                                    }

                                                                }
                                                            }
                                                        }
                                                    </tr>
                                                }


                                            </tbody>
                                        </table>
                                    </div>


                                }

                                else
                                {
                                    <div class="table-responsive col-lg-4" align="right">
                                        <h5 align="center" style="color:lightseagreen"><strong>FMI</strong></h5>

                                        <table class="table table-hover" width="33%">
                                            <thead>
                                                <tr>
                                                    <th>Time</th>
                                                    <th>Weather</th>
                                                    <th>Temp.</th>
                                                    <th>Wind m/s</th>
                                                    <th>Prec. mm</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @for (int y = 0; y < 4; y++)
                                                {
                                                    <tr>
                                                        <td>@DateTime.Today.AddHours(y * 6 + 3).ToString("HH:mm")</td>
                                                        <td><img src="@Url.Content("~/img/weather_icons/empty.png")" width="30px" /></td>
                                                        <td class="text-danger" align="center">--</td>
                                                        <td class="text-success" align="center">--</td>
                                                        <td class="text-primary" align="center">--</td>
                                                    </tr>
                                                }



                                            </tbody>
                                        </table>
                                    </div>
                                }
                                <!--Foreca-->

                                <div class="table-responsive col-lg-4" align="right">
                                    <h5 align="center" style="color:indianred"><strong>Foreca</strong></h5>

                                    <table class="table table-hover" width="33%">
                                        <thead>
                                            <tr>
                                                <th>Time</th>
                                                <th>Weather</th>
                                                <th>Temp.</th>
                                                <th>Wind m/s</th>
                                                <th>Prec. mm</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var item in ViewData.Model)
                                            {
                                                string check5 = item[5].Replace(".", ",");

                                                <tr>
                                                    @if (item[1] == 3 && item[2] > DateTime.Today.AddDays(i + 1).AddHours(-3) && item[2] <= DateTime.Today.AddDays(i + 2))
                                                    {
                                                        if (item[2].Hour == 3 | item[2].Hour == 9 | item[2].Hour == 15 | item[2].Hour == 21)
                                                        {

                                                            <td>@item[2].ToString("HH:mm")</td>
                                                            <td><img src="@Url.Content("~/img/weather_icons_foreca/" + @item[6] + ".png")" width="30px" /></td>
                                                            <td class="text-danger" align="center"><strong>@item[3]°</strong></td>
                                                            <td class="text-success" align="center"><strong>@item[4]</strong></td>
                                                            if (Convert.ToDouble(check5) <= 0.01)
                                                            {
                                                                <td align="center">--</td>
                                                            }
                                                            else
                                                            {
                                                                <td class="text-primary" align="center">@item[5].Replace(".", ",")</td>
                                                            }
                                                        }

                                                    }
                                                </tr>
                                            }


                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        }

                    </div>

                </div>
            </div>
        </div>
    </div>
}
@*
    @if (!(ViewBag.searchLocation == "") & !(ViewBag.searchLocation == "Geolocation error"))
    {

        <!-- CURRENT DAY -->
        int hoursForNextDay = 0;

        <h4 align="center">@DateTime.Today.ToString("dddd")</h4>
        <hr />
        <div class="container-fluid">
            <div class="row" align="center">

                <!-- yr. no -->
                <div class="table-responsive col-sm-4">
                    <h5 align="center" style="color:cornflowerblue"><strong>yr.no</strong></h5>

                    <table class="table table-striped" width="33%">
                        <thead>
                            <tr>
                                <!--<th>Search ID</th>-->
                                <th>Time</th>
                                <th>Weather</th>
                                <th>Temp.</th>
                                <th>Wind m/s</th>
                                <th>Prec. mm</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in ViewData.Model)
                            {
                                <tr>
                                    @if (item[1] == 2 && item[2] > DateTime.UtcNow.AddHours(-1) && item[2] <= DateTime.Today.AddDays(1).AddHours(-4))
                                    {
                                        hoursForNextDay--;
                                        string check5 = item[5].Replace(".", ",");
                                        string check6 = item[6].Replace(".", ",");
                                        <td>@item[2].AddHours(3).ToString("HH:mm")</td>
                                        <td><img src="@Url.Content("~/img/weather_icons_yrno/"+ @item[6] + ".png")" width="30px" /></td>

                                        <td class="text-danger" align="center"><strong>@item[3]°</strong></td>
                                        <td class="text-success" align="center"><strong>@item[4]</strong></td>
                                        <!-- This would probably work better with Java Script-->
                                        if (Convert.ToDouble(check5) <= 0)
                                        {
                                            <td align="center">--</td>
                                        }
                                        else
                                        {
                                            <td class="text-primary" align="center">@item[5] <!--<a class="text-dark text-decoration-none">mm</a>--></td>
                                        }

                                    }
                                </tr>
                            }


                        </tbody>
                    </table>
                </div>

                <!-- FMI -->

                <div class="table-responsive col-sm-4">
                    <h5 align="center" style="color:lightseagreen"><strong>FMI</strong></h5>
                    <table class="table table-striped" width="33%">
                        <thead>
                            <tr>
                                <th>Time</th>
                                <th>Weather</th>
                                <th>Temp.</th>
                                <th>Wind m/s</th>
                                <th>Prec. mm</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in ViewData.Model)
                            {
                                <tr>
                                    @if (item[1] == 1 && item[2] > DateTime.UtcNow.AddHours(-1) && item[2] <= DateTime.Today.AddDays(1).AddHours(-4))
                                    {
                                        string check5 = item[5].Replace(".", ",");
                                        <td>@item[2].AddHours(3).ToString("HH:mm")</td>
                                        if (check5 != "NaN")
                                        {
                                            if (Convert.ToDouble(check5) > 7.6)
                                            {
                                                <td align="center">  <img src="@Url.Content("~/img/weather_icons/heavyrain.png")" width="30px" /></td>

                                            }
                                            else if (Convert.ToDouble(check5) > 2.6)
                                            {
                                                <td align="center">  <img src="@Url.Content("~/img/weather_icons/mediumrain.png")" width="30px" /></td>

                                            }
                                            else if (Convert.ToDouble(check5) > 0.02)
                                            {
                                                <td align="center">  <img src="@Url.Content("~/img/weather_icons/lightrain.png")" width="30px" /></td>

                                            }
                                            else if (Convert.ToDouble(item[6].Replace('.', ',')) == 100)
                                            {
                                                <td align="center">  <img src="@Url.Content("~/img/weather_icons/cloud100.png")" width="30px" /></td>
                                            }
                                            else if (Convert.ToDouble(item[6].Replace('.', ',')) > 75)
                                            {
                                                <td align="center"><img src="@Url.Content("~/img/weather_icons/cloud75.png")" width="30px" /></td>
                                            }
                                            else
                                            {
                                                <td align="center"><img src="@Url.Content("~/img/weather_icons/cloud0.png")" width="30px" /></td>
                                            }
                                            <td class="text-danger" align="center"><strong>@item[3]°</strong></td>
                                            <td class="text-success" align="center"><strong>@item[4]</strong></td>
                                            <!-- This would probably work better with Java Script-->

                                            if (check5 != "NaN" && Convert.ToDouble(check5) <= 0.01)
                                            {
                                                <td align="center">--</td>
                                            }
                                            else
                                            {
                                                <td class="text-primary" align="center">@item[5].Replace(".", ",")</td>
                                            }

                                        }
                                    }
                                </tr>
                            }


                        </tbody>
                    </table>
                </div>

                <!-- Foreca -->

                <div class="table-responsive col-sm-4">
                    <h5 align="center" style="color:indianred"><strong>Foreca</strong></h5>

                    <table class="table table-striped" width="33%">
                        <thead>
                            <tr>
                                <th>Time</th>
                                <th>Weather</th>
                                <th>Temp.</th>
                                <th>Wind m/s</th>
                                <th>Prec. mm</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in ViewData.Model)
                            {
                                <tr>
                                    @if (item[1] == 3 && item[2] > DateTime.UtcNow.AddHours(2) && item[2] <= DateTime.Today.AddDays(1).AddHours(-1))
                                    {
                                        string check5 = item[5].Replace(".", ",");

                                        <td>@item[2].AddHours(0).ToString("HH:mm")</td>
                                        <td><img src="@Url.Content("~/img/weather_icons_foreca/"+ @item[6] + ".png")" width="30px" /></td>

                                        <td class="text-danger" align="center"><strong>@item[3]°</strong></td>
                                        <td class="text-success" align="center"><strong>@item[4]</strong></td>
                                        <!-- This would probably work better with Java Script-->
                                        if (Convert.ToDouble(check5) <= 0.01)
                                        {
                                            <td align="center">--</td>
                                        }
                                        else
                                        {
                                            <td class="text-primary" align="center">@item[5].Replace(".", ",") <!--<a class="text-dark text-decoration-none">mm</a>--></td>
                                        }

                                    }
                                </tr>
                            }


                        </tbody>
                    </table>
                </div>
            </div>

            <!-- SECOND DAY -->
            <br />
            <h4 align="center">@DateTime.Today.AddDays(1).ToString("dddd")</h4>
            <hr />
            <div class="row" align="center">
                <div class="table-responsive col-sm-4">
                    <h5 align="center" style="color:cornflowerblue"><strong>yr.no</strong></h5>

                    <table class="table table-hover" width="33%">
                        <thead>
                            <tr>
                                <!--<th>Search ID</th>-->
                                <th>Time</th>
                                <th>Weather</th>
                                <th>Temp.</th>
                                <th>Wind m/s</th>
                                <th>Prec. mm</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in ViewData.Model)
                            {
                                <tr>
                                    @if (item[1] == 2 && item[2] > DateTime.Today.AddDays(1).AddHours(-4) && item[2] <= DateTime.Today.AddDays(2).AddHours(-5) && item[2].Hour % 2 != 0)
                                    {
                                        string check5 = item[5].Replace(".", ",");

                                        <td>@item[2].AddHours(3).ToString("HH:mm")</td>
                                        <td><img src="@Url.Content("~/img/weather_icons_yrno/"+ @item[6] + ".png")" width="30px" /></td>

                                        <td class="text-danger" align="center"><strong>@item[3]°</strong></td>
                                        <td class="text-success" align="center"><strong>@item[4]</strong></td>
                                        <!-- This would probably work better with Java Script-->
                                        if (Convert.ToDouble(check5) <= 0)
                                        {
                                            <td align="center">--</td>
                                        }
                                        else
                                        {
                                            <td class="text-primary" align="center">@item[5] <!--<a class="text-dark text-decoration-none">mm</a>--></td>
                                        }

                                    }
                                </tr>
                            }


                        </tbody>
                    </table>
                </div>

                <div class="table-responsive col-sm-4">
                    <h5 align="center" style="color:lightseagreen"><strong>FMI</strong></h5>
                    <table class="table table-hover" width="33%">
                        <thead>
                            <tr>
                                <!--<th>Search ID</th>-->
                                <th>Time</th>
                                <th>Weather</th>
                                <th>Temp.</th>
                                <th>Wind m/s</th>
                                <th>Prec. mm</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in ViewData.Model)
                            {
                                <tr>
                                    @if (item[1] == 1 && item[2] > DateTime.Today.AddDays(1).AddHours(-4) && item[2] <= DateTime.Today.AddDays(2).AddHours(-5) && item[2].Hour % 2 != 0)
                                    {
                                        string check5 = item[5].Replace(".", ",");
                                        string check6 = item[6].Replace(".", ",");

                                        <td>@item[2].AddHours(3).ToString("HH:mm")</td>
                                        if (check5 != "NaN")
                                        {
                                            if (Convert.ToDouble(check5) > 7.6)
                                            {
                                                <td align="center">  <img src="@Url.Content("~/img/weather_icons/heavyrain.png")" width="30px" /></td>

                                            }
                                            else if (Convert.ToDouble(check5) > 2.6)
                                            {
                                                <td align="center">  <img src="@Url.Content("~/img/weather_icons/mediumrain.png")" width="30px" /></td>

                                            }
                                            else if (Convert.ToDouble(check5) > 0.02)
                                            {
                                                <td align="center">  <img src="@Url.Content("~/img/weather_icons/lightrain.png")" width="30px" /></td>

                                            }
                                            else if (Convert.ToDouble(check6) == 100)
                                            {
                                                <td align="center">  <img src="@Url.Content("~/img/weather_icons/cloud100.png")" width="30px" /></td>
                                            }
                                            else if (Convert.ToDouble(check6) > 75)
                                            {
                                                <td align="center"><img src="@Url.Content("~/img/weather_icons/cloud75.png")" width="30px" /></td>
                                            }
                                            else
                                            {
                                                <td align="center"><img src="@Url.Content("~/img/weather_icons/cloud0.png")" width="30px" /></td>
                                            }
                                            <td class="text-danger" align="center"><strong>@item[3]°</strong></td>
                                            <td class="text-success" align="center"><strong>@item[4]</strong></td>
                                            <!-- This would probably work better with Java Script-->

                                            if (check5 != "NaN" && Convert.ToDouble(check5) <= 0)
                                            {
                                                <td align="center">--</td>
                                            }
                                            else
                                            {
                                                <td class="text-primary" align="center">@check5</td>
                                            }

                                        }
                                    }
                                </tr>
                            }


                        </tbody>
                    </table>
                </div>

                <!-- TEST! If we can get data from Foreca-->
                <div class="table-responsive col-sm-4">
                    <h5 align="center" style="color:indianred"><strong>Foreca</strong></h5>

                    <table class="table table-hover" width="33%">
                        <thead>
                            <tr>
                                <!--<th>Search ID</th>-->
                                <th>Time</th>
                                <th>Weather</th>
                                <th>Temp.</th>
                                <th>Wind m/s</th>
                                <th>Prec. mm</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in ViewData.Model)
                            {
                                string check5 = item[5].Replace(".", ",");

                                <tr>
                                    @if (item[1] == 3 && item[2] > DateTime.Today.AddDays(1).AddHours(-1) && item[2] <= DateTime.Today.AddDays(2).AddHours(-2) && item[2].Hour % 2 == 0)
                                    {

                                        <td>@item[2].AddHours(0).ToString("HH:mm")</td>
                                        <td><img src="@Url.Content("~/img/weather_icons_foreca/"+ @item[6] + ".png")" width="30px" /></td>

                                        <td class="text-danger" align="center"><strong>@item[3]°</strong></td>
                                        <td class="text-success" align="center"><strong>@item[4]</strong></td>
                                        <!-- This would probably work better with Java Script-->
                                        if (Convert.ToDouble(check5) <= 0.01)
                                        {
                                            <td align="center">--</td>
                                        }
                                        else
                                        {
                                            <td class="text-primary" align="center">@item[5].Replace(".", ",") <!--<a class="text-dark text-decoration-none">mm</a>--></td>
                                        }

                                    }
                                </tr>
                            }


                        </tbody>
                    </table>
                </div>
            </div>





        </div>

        for (int i = 0; i < 5; i++)
        {
            <br />
            <h4 align="center">@DateTime.Today.AddDays(i + 2).ToString("dddd")</h4>
            <hr />
            <div class="row" align="center">
                <div class="table-responsive col-sm-4">
                    <h5 align="center" style="color:cornflowerblue"><strong>yr.no</strong></h5>

                    <table class="table table-hover" width="33%">
                        <thead>
                            <tr>
                                <!--<th>Search ID</th>-->
                                <th>Time</th>
                                <th>Weather</th>
                                <th>Temp.</th>
                                <th>Wind m/s</th>
                                <th>Prec. mm</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in ViewData.Model)
                            {
                                <tr>
                                    @if (item[1] == 2 && item[2] > DateTime.Today.AddDays(i + 2).AddHours(-3) && item[2] <= DateTime.Today.AddDays(i + 3).AddHours(-3))
                                    {
                                        if (item[2].Hour == 0 | item[2].Hour == 6 | item[2].Hour == 12 | item[2].Hour == 18)
                                        {
                                            string check5 = item[5].Replace(".", ",");
                                            string check6 = item[6].Replace(".", ",");

                                            <td>@item[2].AddHours(3).ToString("HH:mm")</td>
                                            <td><img src="@Url.Content("~/img/weather_icons_yrno/"+ @item[6] + ".png")" width="30px" /></td>

                                            <td class="text-danger" align="center"><strong>@item[3]°</strong></td>
                                            <td class="text-success" align="center"><strong>@item[4]</strong></td>
                                            <!-- This would probably work better with Java Script-->
                                            if (Convert.ToDouble(check5) <= 0)
                                            {
                                                <td align="center">--</td>
                                            }
                                            else
                                            {
                                                <td class="text-primary" align="center">@item[5] <!--<a class="text-dark text-decoration-none">mm</a>--></td>
                                            }
                                        }

                                    }
                                </tr>
                            }


                        </tbody>
                    </table>
                </div>

                <div class="table-responsive col-sm-4">
                    <h5 align="center" style="color:lightseagreen"><strong>FMI</strong></h5>
                    <table class="table table-hover" width="33%">
                        <thead>
                            <tr>
                                <!--<th>Search ID</th>-->
                                <th>Time</th>
                                <th>Weather</th>
                                <th>Temp.</th>
                                <th>Wind m/s</th>
                                <th>Prec. mm</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in ViewData.Model)
                            {
                                <tr>
                                    @if (item[1] == 1 && item[2] > DateTime.Today.AddDays(i + 2).AddHours(-3) && item[2] <= DateTime.Today.AddDays(i + 3).AddHours(-3))
                                    {
                                        if (item[2].Hour == 0 | item[2].Hour == 6 | item[2].Hour == 12 | item[2].Hour == 18)
                                        {
                                            string check5 = item[5].Replace(".", ",");
                                            if (check5 != "NaN")
                                            {
                                                <td>@item[2].AddHours(3).ToString("HH:mm")</td>

                                                if (Convert.ToDouble(check5) > 7.6)
                                                {
                                                    <td align="center">  <img src="@Url.Content("~/img/weather_icons/heavyrain.png")" width="30px" /></td>

                                                }
                                                else if (Convert.ToDouble(check5) > 2.6)
                                                {
                                                    <td align="center">  <img src="@Url.Content("~/img/weather_icons/mediumrain.png")" width="30px" /></td>

                                                }
                                                else if (Convert.ToDouble(check5) > 0.02)
                                                {
                                                    <td align="center">  <img src="@Url.Content("~/img/weather_icons/lightrain.png")" width="30px" /></td>

                                                }
                                                else if (Convert.ToDouble(item[6].Replace('.', ',')) == 100)
                                                {
                                                    <td align="center">  <img src="@Url.Content("~/img/weather_icons/cloud100.png")" width="30px" /></td>
                                                }
                                                else if (Convert.ToDouble(item[6].Replace('.', ',')) > 75)
                                                {
                                                    <td align="center"><img src="@Url.Content("~/img/weather_icons/cloud75.png")" width="30px" /></td>
                                                }
                                                else
                                                {
                                                    <td align="center"><img src="@Url.Content("~/img/weather_icons/cloud0.png")" width="30px" /></td>
                                                }
                                                <td class="text-danger" align="center"><strong>@item[3]°</strong></td>
                                                <td class="text-success" align="center"><strong>@item[4]</strong></td>
                                                <!-- This would probably work better with Java Script-->

                                                if (check5 != "NaN" && Convert.ToDouble(check5) <= 0)
                                                {
                                                    <td align="center">--</td>
                                                }
                                                else
                                                {
                                                    <td class="text-primary" align="center">@item[5].Replace(".", ",")</td>
                                                }

                                            }
                                        }
                                    }
                                </tr>
                            }


                        </tbody>
                    </table>
                </div>

                <!-- TEST! If we can get data from Foreca-->

                <div class="table-responsive col-sm-4">
                    <h5 align="center" style="color:indianred"><strong>Foreca</strong></h5>

                    <table class="table table-hover" width="33%">
                        <thead>
                            <tr>
                                <!--<th>Search ID</th>-->
                                <th>Time</th>
                                <th>Weather</th>
                                <th>Temp.</th>
                                <th>Wind m/s</th>
                                <th>Prec. mm</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in ViewData.Model)
                            {
                                string check5 = item[5].Replace(".", ",");

                                <tr>
                                    @if (item[1] == 3 && item[2] > DateTime.Today.AddDays(i + 2) && item[2] <= DateTime.Today.AddDays(i + 2))
                                    {
                                        if (item[2].Hour == 3 | item[2].Hour == 9 | item[2].Hour == 15 | item[2].Hour == 21)
                                        {

                                            <td>@item[2].AddHours(0).ToString("HH:mm")</td>
                                            <td><img src="@Url.Content("~/img/weather_icons_foreca/"+ @item[6] + ".png")" width="30px" /></td>

                                            <td class="text-danger" align="center"><strong>@item[3]°</strong></td>
                                            <td class="text-success" align="center"><strong>@item[4]</strong></td>
                                            <!-- This would probably work better with Java Script-->
                                            if (Convert.ToDouble(check5) <= 0.01)
                                            {
                                                <td align="center">--</td>
                                            }
                                            else
                                            {
                                                <td class="text-primary" align="center">@item[5].Replace(".", ",") <!--<a class="text-dark text-decoration-none">mm</a>--></td>
                                            }
                                        }

                                    }
                                </tr>
                            }


                        </tbody>
                    </table>
                </div>
            </div>
        }

    }
*@
@*
    @for (int i = 0; i < 3; i++)
    {
        int hoursForNextDay = 0;

        <h4 align="center">@DateTime.Today.AddDays(i).ToString("dddd")</h4>
        <hr />

        <div class="row" align="center">
            <div class="table-responsive col-sm-4">
                <h5 align="center" style="color:cornflowerblue"><strong>yr.no</strong></h5>

                <table class="table table-striped" width="33%">
                    <thead>
                        <tr>
                            <!--<th>Search ID</th>-->
                            <th>Time</th>
                            <th>Weather</th>
                            <th>Temp.</th>
                            <th>Wind m/s</th>
                            <th>Prec. mm</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in ViewData.Model)
                        {
                            <tr>
                                @if (item[1] == 2 && item[2] > DateTime.Now.AddDays(i).AddHours(-4) && item[2] <= DateTime.Today.AddDays(1+i).AddHours(i-3))
                                {
                                    hoursForNextDay--;
                                    <td>@item[2].AddHours(3).ToString("HH:mm")</td>
                                    if (Convert.ToDouble(item[5]) > 7.6)
                                    {
                                        <td align="center">  <img src="@Url.Content("~/img/weather_icons/heavyrain.png")" width="30px" /></td>

                                    }
                                    else if (Convert.ToDouble(item[5]) > 2.6)
                                    {
                                        <td align="center">   <img src="@Url.Content("~/img/weather_icons/mediumrain.png")" width="30px" /></td>

                                    }
                                    else if (Convert.ToDouble(item[5]) > 0.2)
                                    {
                                        <td align="center">   <img src="@Url.Content("~/img/weather_icons/lightrain.png")" width="30px" /></td>

                                    }
                                    else if (Convert.ToDouble(item[6]) == 100)
                                    {
                                        <td align="center">   <img src="@Url.Content("~/img/weather_icons/cloud100.png")" width="30px" /></td>
                                    }
                                    else if (Convert.ToDouble(item[6]) > 75)
                                    {
                                        <td align="center"> <img src="@Url.Content("~/img/weather_icons/cloud75.png")" width="30px" /></td>
                                    }
                                    else
                                    {
                                        <td align="center"> <img src="@Url.Content("~/img/weather_icons/cloud0.png")" width="30px" /></td>
                                    }
                                    <td class="text-danger" align="center"><strong>@item[3]°</strong></td>
                                    <td class="text-success" align="center"><strong>@item[4]</strong></td>
                                    <!-- This would probably work better with Java Script-->
                                    if (Convert.ToDouble(item[5]) <= 0)
                                    {
                                        <td align="center">--</td>
                                    }
                                    else
                                    {
                                        <td class="text-primary" align="center">@item[5] <!--<a class="text-dark text-decoration-none">mm</a>--></td>
                                    }

                                }
                            </tr>
                        }


                    </tbody>
                </table>
            </div>


            <div class="table-responsive col-sm-4">
                <h5 align="center" style="color:lightseagreen"><strong>FMI</strong></h5>
                <table class="table table-striped" width="33%">
                    <thead>
                        <tr>
                            <!--<th>Search ID</th>-->
                            <th>Time</th>
                            <th>Weather</th>
                            <th>Temp.</th>
                            <th>Wind m/s</th>
                            <th>Prec. mm</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in ViewData.Model)
                        {
                            <tr>
                                @if (item[1] == 1 && item[2] > DateTime.Now.AddDays(i).AddHours(-4) && item[2] <= DateTime.Today.AddDays(1+i).AddHours(-4))
                                {
                                    string check5 = item[5].Replace(".", ",");
                                    <td>@item[2].AddHours(3).ToString("HH:mm")</td>
                                    if (check5 != "NaN")
                                    {
                                        if (Convert.ToDouble(check5) > 7.6)
                                        {
                                            <td align="center">  <img src="@Url.Content("~/img/weather_icons/heavyrain.png")" width="30px" /></td>

                                        }
                                        else if (Convert.ToDouble(check5) > 2.6)
                                        {
                                            <td align="center">  <img src="@Url.Content("~/img/weather_icons/mediumrain.png")" width="30px" /></td>

                                        }
                                        else if (Convert.ToDouble(check5) > 0.02)
                                        {
                                            <td align="center">  <img src="@Url.Content("~/img/weather_icons/lightrain.png")" width="30px" /></td>

                                        }
                                        else if (Convert.ToDouble(item[6].Replace('.', ',')) == 100)
                                        {
                                            <td align="center">  <img src="@Url.Content("~/img/weather_icons/cloud100.png")" width="30px" /></td>
                                        }
                                        else if (Convert.ToDouble(item[6].Replace('.', ',')) > 75)
                                        {
                                            <td align="center"><img src="@Url.Content("~/img/weather_icons/cloud75.png")" width="30px" /></td>
                                        }
                                        else
                                        {
                                            <td align="center"><img src="@Url.Content("~/img/weather_icons/cloud0.png")" width="30px" /></td>
                                        }
                                        <td class="text-danger" align="center"><strong>@item[3]°</strong></td>
                                        <td class="text-success" align="center"><strong>@item[4]</strong></td>
                                        <!-- This would probably work better with Java Script-->

                                        if (check5 != "NaN" && Convert.ToDouble(check5) <= 0)
                                        {
                                            <td align="center">--</td>
                                        }
                                        else
                                        {
                                            <td class="text-primary" align="center">@item[5].Replace(".", ",")</td>
                                        }

                                    }
                                }
                            </tr>
                        }


                    </tbody>
                </table>
            </div>

            <!-- TEST! If we can get data from Foreca-->

            <div class="table-responsive col-sm-4">
                <h5 align="center" style="color:indianred"><strong>Foreca</strong></h5>

                <table class="table table-striped" width="33%">
                    <thead>
                        <tr>
                            <!--<th>Search ID</th>-->
                            <th>Time</th>
                            <th>Weather</th>
                            <th>Temp.</th>
                            <th>Wind m/s</th>
                            <th>Prec. mm</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in ViewData.Model)
                        {
                            <tr>
                                @if (item[1] == 2 && item[2] > DateTime.Now.AddDays(i).AddHours(-4) && item[2] <= DateTime.Today.AddDays(1+i).AddHours(-4))
                                {

                                    <td>@item[2].AddHours(3).ToString("HH:mm")</td>
                                    if (Convert.ToDouble(item[5]) > 7.6)
                                    {
                                        <td align="center">  <img src="@Url.Content("~/img/weather_icons/heavyrain.png")" width="30px" /></td>

                                    }
                                    else if (Convert.ToDouble(item[5]) > 2.6)
                                    {
                                        <td align="center">   <img src="@Url.Content("~/img/weather_icons/mediumrain.png")" width="30px" /></td>

                                    }
                                    else if (Convert.ToDouble(item[5]) > 0.2)
                                    {
                                        <td align="center">   <img src="@Url.Content("~/img/weather_icons/lightrain.png")" width="30px" /></td>

                                    }
                                    else if (Convert.ToDouble(item[6]) == 100)
                                    {
                                        <td align="center">   <img src="@Url.Content("~/img/weather_icons/cloud100.png")" width="30px" /></td>
                                    }
                                    else if (Convert.ToDouble(item[6]) > 75)
                                    {
                                        <td align="center"> <img src="@Url.Content("~/img/weather_icons/cloud75.png")" width="30px" /></td>
                                    }
                                    else
                                    {
                                        <td align="center"> <img src="@Url.Content("~/img/weather_icons/cloud0.png")" width="30px" /></td>
                                    }
                                    <td class="text-danger" align="center"><strong>@item[3]°</strong></td>
                                    <td class="text-success" align="center"><strong>@item[4]</strong></td>
                                    <!-- This would probably work better with Java Script-->
                                    if (Convert.ToDouble(item[5]) <= 0)
                                    {
                                        <td align="center">--</td>
                                    }
                                    else
                                    {
                                        <td class="text-primary" align="center">@item[5] <!--<a class="text-dark text-decoration-none">mm</a>--></td>
                                    }

                                }
                            </tr>
                        }


                    </tbody>
                </table>
            </div>
        </div>

    }
*@
<!--jQuery for search bar-->
@section scripts {
    <script>
        var clicked = new Boolean(false);

        $(function () {
            $('.btn-primary').click(function (e) {
                var ipvalue = $("#IP").val();
                var azAZ = new RegExp('^[a-zA-Z\u00C0-\u00FF]+(-[a-zA-Z\u00C0-\u00FF]+)?$')
                //var azAZ = new RegExp('^[a-zA-Z-\u00C0-\u00FF]*$');

                if (clicked === true) {
                    e.preventDefault();
                }

                if (ipvalue === "") {
                    e.preventDefault();

                    //alert('Value is null!');
                    var errorMessage = document.getElementById('eMessage');
                    errorMessage.innerText = "Enter a location first!";

                    //this.href = this.href.replace("thisValueGetsReplaced", "nullLocation");
                }
                else {
                    if (azAZ.test(ipvalue)) {
                        this.href = this.href.replace("thisValueGetsReplaced", ipvalue);
                        clicked = true;
                    }
                    else {
                        e.preventDefault();
                        var errorMessage = document.getElementById('eMessage');
                        errorMessage.innerText = "Use only letters: a-z, A-Z, åäö, ÅÄÖ";
                    }
                }
            });
        });

        $(document).keypress(function (e) {
            if ((e.keyCode || e.which) == 13) {
                // Enter key pressed
                var button = this.getElementById("SearchButton");
                button.click();

            }
        });
    </script>
}
